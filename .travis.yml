language: generic

sudo: false

env:
  global:
  - HUGO_VERSION=0.52

before_install:
  # Install Hugo
  - mkdir -p bin
  - curl -L https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz -o bin/hugo.tar.gz
  - tar xzvvf bin/hugo.tar.gz -C ./bin

script:
  - "./bin/hugo"

before_deploy:
  # Set up git user name and tag this commit
  #- git config --local user.name "YOUR GIT USER NAME"
  #- git config --local user.email "YOUR GIT USER EMAIL"
  - git tag "$(date +'%Y%m%d_%H%M%S')-$(git log --format=%h -1)"
  - tar cjvf public.tar.bz2 public/

deploy:
  - provider: pages
    skip-cleanup: true
    github-token:
      secure: "rcD9vaqgDJN4ub9ZbJKn+ZWL1/F7akR1uBCtxqB8dY/cLGLSXl5q4YGTWSrJ3QQkLnV0kQBbE2ZHy2I3wwe4PiJ1nBY/wscbQTK5LDRJRdSYgfbYRSrnHEzcKcVFFLYgmhJYXpWZxngt4QBEvrxID6D6qgw0FugCkr6J0vod3cON4h6c6dNtsGeX4SLUVbvDXzCfV3OMJAWPdsp5vSRdc8mlw0Copp4FUyhOl1K961Q9vx208CjRMEgbluwKvuneFzv89+jnAt1gWtt04BIaTWb6a95EcLid9QkMVud4/hbg1d3L8QoctdfCDqqBzh3ey8oY/yc8YuV8mOJp3Aeo0TS7o349MvgPXcj/AQ+2AXd10avMOc/wwnco3T+CBlyOEQaPT17XYlP1BKRCqAHilJeGTt4Pd/LHUXttOFhVeo0Bd0AkL2ECWK4K4FGIE9loLuZahaQIu/eMVYwyjIS9IG7VyrLqImcwK3nhKm8QaI1dqW+2X80yXdp5ge2utCrfaNVEwwyyZsZt9iNqjprkcYEl/6ghM0N560mSf12a5bYgGNGTbhSi7oODai7MrALRZGoR3y3NrpPkSoKmdcvaTRal+h+mLNjGYdAnPNFNxJcj2CnbHaBqinrajqHkmhIk/BHAX9/tXpjtV1hq35NcR8AlKgH3cboH7y5dD3+N5UE="
    keep-history: true
    local-dir: public
    on:
      branch: master
    target-branch: gh-pages
  - provider: releases
    api_key:
    secure: "rcD9vaqgDJN4ub9ZbJKn+ZWL1/F7akR1uBCtxqB8dY/cLGLSXl5q4YGTWSrJ3QQkLnV0kQBbE2ZHy2I3wwe4PiJ1nBY/wscbQTK5LDRJRdSYgfbYRSrnHEzcKcVFFLYgmhJYXpWZxngt4QBEvrxID6D6qgw0FugCkr6J0vod3cON4h6c6dNtsGeX4SLUVbvDXzCfV3OMJAWPdsp5vSRdc8mlw0Copp4FUyhOl1K961Q9vx208CjRMEgbluwKvuneFzv89+jnAt1gWtt04BIaTWb6a95EcLid9QkMVud4/hbg1d3L8QoctdfCDqqBzh3ey8oY/yc8YuV8mOJp3Aeo0TS7o349MvgPXcj/AQ+2AXd10avMOc/wwnco3T+CBlyOEQaPT17XYlP1BKRCqAHilJeGTt4Pd/LHUXttOFhVeo0Bd0AkL2ECWK4K4FGIE9loLuZahaQIu/eMVYwyjIS9IG7VyrLqImcwK3nhKm8QaI1dqW+2X80yXdp5ge2utCrfaNVEwwyyZsZt9iNqjprkcYEl/6ghM0N560mSf12a5bYgGNGTbhSi7oODai7MrALRZGoR3y3NrpPkSoKmdcvaTRal+h+mLNjGYdAnPNFNxJcj2CnbHaBqinrajqHkmhIk/BHAX9/tXpjtV1hq35NcR8AlKgH3cboH7y5dD3+N5UE="
    file: public.tar.bz2
    skip_cleanup: true
    on:
      branch: master

# whitelist
branches:
  only:
    - master 
