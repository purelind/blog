language: generic

sudo: false

env:
  global:
  - HUGO_VERSION=0.52

before_install:
  # Install Hugo
  - mkdir -p bin
  - curl -L https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz -o bin/hugo.tar.gz
  - tar xzvvf bin/hugo.tar.gz -C ./bin

script:
  - "./bin/hugo"

before_deploy:
  # Set up git user name and tag this commit
  #- git config --local user.name "YOUR GIT USER NAME"
  #- git config --local user.email "YOUR GIT USER EMAIL"
  - git tag "$(date +'%Y%m%d_%H%M%S')-$(git log --format=%h -1)"
  - tar cjvf public.tar.bz2 public/

deploy:
  - provider: pages
    skip-cleanup: true
    github-token:
      secure: "T8cF44Rb65284a1sNwTk/e0dUJO4Ne8WcR2MKLHCc0BohJnKc1E+D6A/Z2ejoGCaTT9z3BfoYi7HDVkErKyq1p0d09p2t69oa7UuRa8CxV615sL0OROWBueWNSpotm+D2PH5xk+rkeczJXB4s42c0og+mS6oqGo0mXXoE98deELEQzmGjnDbYeQvsxSm1AlllHxFS6NbDdm44KtnUDDx7tikIO0o7en5scQ1VznEkwCCxn+6UH8Zk3qjFTzsmBCgEiLe7EwSzyOv5Yaiq89g56ceKZBbktJiZIBsK7JrfN+kwnejLvo3Qn66xGoX2OhCldqHi3fcmvx/IVGTrf7rB187U6zp2zh8qjgtg13fPJrIiUyXPA9KB164GPkCFsTKO6phPI4a9yvtPqOTcAHXgLyeTj/6j2Pn8tr81u4UFXv2hg0/uRKyy0GUvfBEfINDbb2Z9xZrzLyFaso1tw51bKmRCn4VZaaUnjhuNUHRiBqCXea1p+XH53ETTiFoG9ISMIecUOOok2hlETIXeh8yR5Dq/RIIqEyPwbiRZzSGdMVukWA2dBBXxkrRniREIfRqW2Y+RYQnWnvsqYxx+8M08zD2/lFJ5luhilaVsRoEoo8gmFAUOQzT1GssAJ2RNl/dRcSSxdRx35AGPat+m5Lkw6vES0SL6I/CNqKhQbcrCu8="
    keep-history: true
    local-dir: public
    on:
      branch: master
    target-branch: gh-pages
  - provider: releases
    api_key:
      secure: "T8cF44Rb65284a1sNwTk/e0dUJO4Ne8WcR2MKLHCc0BohJnKc1E+D6A/Z2ejoGCaTT9z3BfoYi7HDVkErKyq1p0d09p2t69oa7UuRa8CxV615sL0OROWBueWNSpotm+D2PH5xk+rkeczJXB4s42c0og+mS6oqGo0mXXoE98deELEQzmGjnDbYeQvsxSm1AlllHxFS6NbDdm44KtnUDDx7tikIO0o7en5scQ1VznEkwCCxn+6UH8Zk3qjFTzsmBCgEiLe7EwSzyOv5Yaiq89g56ceKZBbktJiZIBsK7JrfN+kwnejLvo3Qn66xGoX2OhCldqHi3fcmvx/IVGTrf7rB187U6zp2zh8qjgtg13fPJrIiUyXPA9KB164GPkCFsTKO6phPI4a9yvtPqOTcAHXgLyeTj/6j2Pn8tr81u4UFXv2hg0/uRKyy0GUvfBEfINDbb2Z9xZrzLyFaso1tw51bKmRCn4VZaaUnjhuNUHRiBqCXea1p+XH53ETTiFoG9ISMIecUOOok2hlETIXeh8yR5Dq/RIIqEyPwbiRZzSGdMVukWA2dBBXxkrRniREIfRqW2Y+RYQnWnvsqYxx+8M08zD2/lFJ5luhilaVsRoEoo8gmFAUOQzT1GssAJ2RNl/dRcSSxdRx35AGPat+m5Lkw6vES0SL6I/CNqKhQbcrCu8="
    file: public.tar.bz2
    skip_cleanup: true
    on:
      branch: master

# whitelist
branches:
  only:
    - master 
